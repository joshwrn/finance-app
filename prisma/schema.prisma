generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["referentialIntegrity"]
}

datasource db {
    provider             = "mysql"
    url                  = env("DATABASE_URL")
    referentialIntegrity = "prisma"
}

enum CategoryType {
    WISHLIST
    EXPENSE
}

model User {
    id         String     @id @default(cuid())
    username   String     @unique
    email      String     @unique
    password   String
    salary     Int?
    categories Category[]
    items      Item[]
    SubItem    SubItem[]
}

model SubItem {
    id         String   @id @default(cuid())
    name       String
    price      Decimal?
    dateAdded  DateTime @default(now())
    link       String?
    Item       Item?    @relation(fields: [itemId], references: [id])
    itemId     String?
    categoryId String
    user       User     @relation(fields: [userId], references: [id])
    userId     String
}

model Item {
    id            String    @id @default(cuid())
    name          String
    price         Decimal?
    dateAdded     DateTime  @default(now())
    datePurchased DateTime?
    link          String?
    category      Category  @relation(fields: [categoryId], references: [id])
    group         Boolean?
    subItems      SubItem[]
    categoryId    String
    user          User      @relation(fields: [userId], references: [id])
    userId        String

    @@index([categoryId])
}

model Category {
    id           String       @id @default(cuid())
    name         String
    categoryType CategoryType
    items        Item[]
    User         User?        @relation(fields: [userId], references: [id])
    userId       String?
}
